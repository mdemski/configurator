<div class="navbar-background">
  <img src="assets/img/navbar_backgrounds/ilya-bronskiy-__Z8VvhbIZ4-unsplash.jpg" alt="flashing">
</div>

<div class="md-container"  *ngIf="flashing$ | async as flashing">

  <div class="md-container--left-side">
    <!--Icons with specification of product-->
    <div class="specification-icons">
      <div *ngIf="flashing.oblachowanieMaterial" class="specification-icons__element active-icon">{{'FLASHINGS-DATA.' + flashing.oblachowanieMaterial | translate}}</div>
      <div *ngIf="flashing.oblachowanieKolor" class="specification-icons__element active-icon">{{flashing.oblachowanieKolor.split(':')[1]}}</div>
      <div *ngIf="flashing.oblachowanieFinisz" class="specification-icons__element active-icon">{{'FLASHINGS-DATA.' + flashing.oblachowanieFinisz | translate}}</div>
      <div class="specification-icons__element active-icon"><img
        src="assets/icons/single_product_page/grammar.jpg" alt="{{flashing.oblachowanieMaterial}}"></div>
      <div class="specification-icons__element active-icon"><img
        src="assets/icons/single_product_page/millimeters.jpg" alt="{{flashing.oblachowanieMaterial}}"></div>
      <div class="specification-icons__element active-icon"><img
        src="assets/icons/single_product_page/r.jpg" alt="{{flashing.oblachowanieMaterial}}"></div>
      <div class="specification-icons__element active-icon"><img
        src="assets/icons/single_product_page/t.jpg" alt="{{flashing.oblachowanieMaterial}}"></div>
    </div>
    <!--Icons with specification of product-->

    <!--Main pictures of product-->
    <div class="main-picture">
      <img *ngFor="let url of picturesOfFlashing" src="{{url}}" alt="{{flashing.productName}}">
    </div>
    <!--Main pictures of product-->
  </div>

  <div class="md-container--right-side">
    <p class="product-name">{{flashing.productName}}</p>
    <p
      class="price">{{ 'SINGLE-PRODUCT.price' | translate}} {{(flashing.CenaDetaliczna / (cart$ | async).cart.exchange) | currency: ' '}} {{returnCurrencyName((cart$ | async).cart.currency)}}</p>
    <p *ngIf="logInUser.isLogged"
       class="price--after-discount">{{ 'SINGLE-PRODUCT.priceAfterDisc' | translate}} {{(flashing.CenaDetaliczna / (1 + (user$ | async).currentUser.basicDiscount + (user$ | async).currentUser.accessoriesDiscount) / (cart$ | async).cart.exchange) | currency :' '}} {{returnCurrencyName((cart$ | async).cart.currency)}}</p>
    <div class="line"></div>
    <div class="all-sizes-container">
      <p>{{ 'SINGLE-PRODUCT.availableSizes' | translate}}</p>
      <!--TODO przekierować na odpowiednią stronę z wymiarem okna-->
      <a routerLink="../{{getLinkCode(flashing.kod, size)}}" class="icon-btn-light icon-btn-light--light-grey-red btn-big" [routerLinkActive]="['active-button']"
         *ngFor="let size of availableSizes">{{size}}</a>
    </div>
    <div class="line"></div>
    <div class="quantity-container">
      <p class="quantity-desc">{{ 'SINGLE-PRODUCT.quantity' | translate}}</p>
      <i (click)="decreaseQuantity()">-</i>
      <input type="number" class="quantity" [(ngModel)]="quantity">
      <i (click)="increaseQuantity()">+</i>
    </div>
    <div class="line"></div>
    <a class="btn btn--grey add-to-cart"
       (click)="addToCart(flashing, quantity)">{{ 'SINGLE-PRODUCT.addToCart' | translate}}</a>
    <a class="btn btn--red add-to-cart"
       (click)="order(flashing, quantity)">{{ 'SINGLE-PRODUCT.orderNow' | translate}}</a>
    <div class="line"></div>
    <p class="product-information--title">{{ 'SINGLE-PRODUCT.productInformation' | translate}}</p>
    <table class="table table-striped table-hover">
      <thead>
      <tr>
        <th scope="col">{{ 'SINGLE-PRODUCT.LP' | translate}}</th>
        <th scope="col">{{ 'SINGLE-PRODUCT.specName' | translate}}</th>
        <th scope="col">{{ 'SINGLE-PRODUCT.specValue' | translate}}</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <th scope="row">1</th>
        <td>{{ 'SINGLE-PRODUCT.flashingModel' | translate}}</td>
        <td>{{'FLASHINGS-DATA.' + flashing.model | translate}}</td>
      </tr>
      <tr>
        <th scope="row">2</th>
        <td>{{ 'SINGLE-PRODUCT.flashingOuterMaterial' | translate}}</td>
        <td *ngIf="flashing.oblachowanieMaterial">{{'FLASHINGS-DATA.' + flashing.oblachowanieMaterial  | translate}}</td>
      </tr>
      <tr>
        <th scope="row">3</th>
        <td>{{ 'SINGLE-PRODUCT.flashingOuterColor' | translate}}</td>
        <td *ngIf="flashing.oblachowanieKolor">{{flashing.oblachowanieKolor.split(':')[1]}}</td>
      </tr>
      <tr>
        <th scope="row">4</th>
        <td>{{ 'SINGLE-PRODUCT.flashingOuterFinish' | translate}}</td>
        <td *ngIf="flashing.oblachowanieMaterial">{{'FLASHINGS-DATA.' + flashing.oblachowanieFinisz  | translate}}</td>
      </tr>
      <tr>
        <th scope="row">5</th>
        <td>{{ 'SINGLE-PRODUCT.flashingGeometry' | translate}}</td>
        <td>{{flashing.geometria}} - {{'FLASHINGS-DATA.' + flashing.typKolnierza | translate}}</td>
      </tr>
      <tr>
        <th scope="row">6</th>
        <td>{{ 'SINGLE-PRODUCT.flashingApron' | translate}}</td>
        <td>{{'FLASHINGS-DATA.' + flashing.typFartucha | translate}}</td>
      </tr>
      <tr>
        <th scope="row">7</th>
        <td>{{ 'SINGLE-PRODUCT.flashingDimensions' | translate}}</td>
        <td>{{flashing.szerokosc}} x {{flashing.wysokosc}}</td>
      </tr>
      <tr>
        <th scope="row">8</th>
        <td>{{ 'SINGLE-PRODUCT.flashingCategory' | translate}}</td>
        <td>{{'FLASHINGS-DATA.' + flashing.grupaAsortymentowa | translate}}</td>
      </tr>
      <tr>
        <th scope="row">9</th>
        <td>{{ 'SINGLE-PRODUCT.flashingRoofing' | translate}}</td>
        <td *ngIf="flashing.roofing.length > 0">{{'FLASHINGS-DATA.' + flashing.roofing[0] | translate}}</td>
        <td *ngIf="flashing.roofing.length === 0">{{'SINGLE-PRODUCT.n/a' | translate}}</td>
      </tr>
      <tr>
        <th scope="row">10</th>
        <td>{{ 'SINGLE-PRODUCT.flashingTileHeight' | translate}}</td>
        <td>{{flashing.flashingTileHeight}}</td>
      </tr>
      <tr *ngIf="flashing.rozstawPoziom && flashing.rozstawPoziom > 0">
        <th scope="row">10a</th>
        <td>{{ 'SINGLE-PRODUCT.flashingHorizontalDistance' | translate}}</td>
        <td>{{flashing.rozstawPoziom}}</td>
      </tr>
      <tr *ngIf="flashing.rozstawPion && flashing.rozstawPion > 0">
        <th scope="row">10b</th>
        <td>{{ 'SINGLE-PRODUCT.flashingVerticalDistance' | translate}}</td>
        <td>{{flashing.rozstawPion}}</td>
      </tr>
      <tr>
        <th scope="row">11</th>
        <td>{{ 'SINGLE-PRODUCT.detalPrice' | translate}}</td>
        <td>{{flashing.CenaDetaliczna | currency: ' '}}</td>
      </tr>
      <tr>
        <th scope="row">12</th>
        <td>{{ 'SINGLE-PRODUCT.detalGrossPrice' | translate}}</td>
        <td>{{(flashing.CenaDetaliczna) + (flashing.CenaDetaliczna * (cart$ | async).cart.vatRate) | currency: ' '}}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
<!--Extra information about product-->
<section>
  <div class="background-container" *ngIf="flashing$ | async as flashing">
    <div class="main-info" *ngIf="flashing.rodzina">
      <p class="main-info__desc">{{ 'SINGLE-PRODUCT.' + flashing.geometria + 'Desc' | translate}}</p>
      <img class="main-info__photo"
           src="assets/img/shop/single_product_page/Kołnierz{{flashing.geometria.split(':')[1]}}.png"
           alt="{{'FLASHINGS-DATA.' + flashing.geometria | translate}}">
    </div>
  </div>
</section>
